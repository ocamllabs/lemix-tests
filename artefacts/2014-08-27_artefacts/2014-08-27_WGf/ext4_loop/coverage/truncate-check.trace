        ######################################
        ## Test truncate___truncate_nonempty_dir2__f2.txt_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f2.txt/ 0
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0|D|97923
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____0/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/nonexist_6/ 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/empty_dir2|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt 100
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir1/f1.txt|F|18|100|ed4a77d1b56a118938788fc53037759b6c501e3d
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/nonexist_6 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/ 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2_____10
           /test_dir_truncate___truncate_nonempty_dir2_____10|D|32642
           /test_dir_truncate___truncate_nonempty_dir2_____10/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir2_____10/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir1|D|32645
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir1/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir1/d2/d3|D|32647
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir2/d2|D|32649
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2_____10/nonempty_dir2/d2/d3|D|32650
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/nonexist_5 100
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/empty_dir1|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/empty_dir2|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir1|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir1/d2|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir1/d2/d3|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir2/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___100/nonempty_dir2/d2/d3|D|65282
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1___0
           /test_dir_truncate___truncate_nonempty_dir1___0|D|32641
           /test_dir_truncate___truncate_nonempty_dir1___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1___0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_f1.txt/ 0
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_2_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_2_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_2_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_2/ 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_2_____10
           /test_dir_truncate___truncate_nonexist_2_____10|D|32641
           /test_dir_truncate___truncate_nonexist_2_____10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_2_____10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_2_____10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/ 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2_____1000
           /test_dir_truncate___truncate_nonempty_dir2_____1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir2_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2_____1000/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f2.txt_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f2.txt/ 10
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1___10
           /test_dir_truncate___truncate_nonempty_dir1___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1___10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_2___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_2___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_2___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_2 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_2___10
           /test_dir_truncate___truncate_nonexist_2___10|D|97921
           /test_dir_truncate___truncate_nonexist_2___10/empty_dir1|D|97923
           /test_dir_truncate___truncate_nonexist_2___10/empty_dir2|D|97924
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir1|D|32641
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir1/d2|D|32642
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir1/d2/d3|D|32643
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir2|D|32644
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir2/d2|D|65281
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_2___10/nonempty_dir2/d2/d3|D|65282
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2___10
           /test_dir_truncate___truncate_nonempty_dir2__d2___10|D|32650
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/empty_dir1|D|32651
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/empty_dir2|D|32652
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir1/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir1/d2/f3.txt|F|24|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir2/f1.txt|F|31|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir2/f2.txt|F|32|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir2/d2|D|65285
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___10/nonempty_dir2/d2/d3|D|65286
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_2___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_2___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_2___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_2 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_2___1000
           /test_dir_truncate___truncate_nonexist_2___1000|D|32641
           /test_dir_truncate___truncate_nonexist_2___1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_2___1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_2___1000/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/nonexist_5 0
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___0/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_1___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_1___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_1___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_1 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_1___0
           /test_dir_truncate___truncate_nonexist_1___0|D|32642
           /test_dir_truncate___truncate_nonexist_1___0/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonexist_1___0/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_1___0/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__nonexist_4___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/nonexist_4 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___1000/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f1.txt___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f1.txt -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/sl_f3.txt/ 1000
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000|D|97923
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____1000/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/ 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir1|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir1/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir1/d2/d3|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir2/d2|D|32649
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____0/nonempty_dir2/d2/d3|D|32650
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__nonexist_4_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/nonexist_4/ 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/empty_dir1|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir2|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir2/d2|D|65286
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____0/nonempty_dir2/d2/d3|D|65287
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_dir__nonexist_3_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_dir/nonexist_3/ 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10|D|97921
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/empty_dir1|D|97923
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/empty_dir2|D|97924
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir1|D|32641
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir1/d2|D|32642
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir1/d2/d3|D|32643
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir2|D|32644
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir2/d2|D|65281
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____10/nonempty_dir2/d2/d3|D|65282
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/sl_f3.txt 10
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir1/d2/f3.txt|F|13|10|cb091ce81530253707a6fa79e266f6285cf8c79b
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir1_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir1_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir1_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir1/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_empty_dir1_____-100
           /test_dir_truncate___truncate_empty_dir1_____-100|D|32641
           /test_dir_truncate___truncate_empty_dir1_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_empty_dir1_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir1_____-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/nonexist_5 1000
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000|D|65288
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/empty_dir1|D|65289
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/empty_dir2|D|65290
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir1|D|65291
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir1/d2|D|65292
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir1/d2/d3|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir2|D|97922
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir2/d2|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___1000/nonempty_dir2/d2/d3|D|97924
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/nonexist_6/ 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____1000/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2___0
           /test_dir_truncate___truncate_nonempty_dir1__d2___0|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___0/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____-100/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/ 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2_____10
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_f1.txt/ 100
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir2/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____100/nonempty_dir2/d2/d3|D|32647
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/ 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2_____100
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/nonexist_6 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/ 10
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir2/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____10/nonempty_dir2/d2/d3|D|32647
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_1___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_1___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_1___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_1 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_1___100
           /test_dir_truncate___truncate_nonexist_1___100|D|32641
           /test_dir_truncate___truncate_nonexist_1___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_1___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_1___100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f1.txt_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f1.txt/ 100
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_1___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_1___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_1___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_1 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_1___1000
           /test_dir_truncate___truncate_nonexist_1___1000|D|32641
           /test_dir_truncate___truncate_nonexist_1___1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_1___1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_1___1000/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/nonexist_6 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___0/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__f3.txt_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/f3.txt/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir1___100
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir1___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir1___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir1 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir1___100
           /test_dir_truncate___truncate_empty_dir1___100|D|32641
           /test_dir_truncate___truncate_empty_dir1___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_empty_dir1___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir1___100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f2.txt___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f2.txt -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100|D|97923
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___-100/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__d3_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/d3/ 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__f3.txt_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/f3.txt/ 0
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/empty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/empty_dir2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir1|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir1/d2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir1/d2/d3|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir2|D|32649
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir2/d2|D|32650
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____0/nonempty_dir2/d2/d3|D|32651
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/ 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2_____100
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir1/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir1/d2/f3.txt|F|14|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir2/f1.txt|F|21|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir2/f2.txt|F|22|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__d3_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/d3/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir1|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir1/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir1/d2/d3|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir2/d2|D|32649
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____-100/nonempty_dir2/d2/d3|D|65288
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__nonexist_4_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/nonexist_4/ 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000|D|32649
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/empty_dir1|D|32650
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/empty_dir2|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir1|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir1/f1.txt|F|27|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir1/d2/f3.txt|F|22|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir2/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir2/f2.txt|F|30|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____1000/nonempty_dir2/d2/d3|D|65285
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_d2/ 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/empty_dir1|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir1/f1.txt|F|16|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir2|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir2/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir2/f2.txt|F|19|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____10/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2___0
           /test_dir_truncate___truncate_nonempty_dir2__d2___0|D|97923
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___0/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir1_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir1_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir1_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir1/ 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir1_____1000
           /test_dir_truncate___truncate_empty_dir1_____1000|D|97923
           /test_dir_truncate___truncate_empty_dir1_____1000/empty_dir1|D|97924
           /test_dir_truncate___truncate_empty_dir1_____1000/empty_dir2|D|97925
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir1_____1000/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0|D|32650
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/empty_dir1|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/empty_dir2|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir1/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir1/d2/f3.txt|F|24|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir2/f1.txt|F|31|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir2/f2.txt|F|32|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir2/d2|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___0/nonempty_dir2/d2/d3|D|65286
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/ 1000
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____1000/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_d2/ 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____1000/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/nonexist_5/ 10
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/empty_dir1|D|32649
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/empty_dir2|D|32650
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir1|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir1/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir1/d2|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir1/d2/f3.txt|F|24|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir2/f1.txt|F|31|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir2/f2.txt|F|32|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir2/d2|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____10/nonempty_dir2/d2/d3|D|65286
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/nonexist_6/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____-100/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/ 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2_____0
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__f3.txt___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/f3.txt -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___-100/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/ 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2_____10
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____10/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2___-100
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___-100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__d3___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/d3 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir2/f1.txt|F|21|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir2/f2.txt|F|22|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir2/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___10/nonempty_dir2/d2/d3|D|32647
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_2_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_2_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_2_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_2/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonexist_2_____-100
           /test_dir_truncate___truncate_nonexist_2_____-100|D|32641
           /test_dir_truncate___truncate_nonexist_2_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_2_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_2_____-100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/ 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2_____0
           /test_dir_truncate___truncate_nonempty_dir2_____0|D|32642
           /test_dir_truncate___truncate_nonempty_dir2_____0/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir2_____0/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir1|D|32645
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir1/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir1/d2/d3|D|32647
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir2/d2|D|65286
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2_____0/nonempty_dir2/d2/d3|D|65287
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/nonexist_6 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___1000/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir2_____10
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir2_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir2_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir2/ 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir2_____10
           /test_dir_truncate___truncate_empty_dir2_____10|D|65281
           /test_dir_truncate___truncate_empty_dir2_____10/empty_dir1|D|65283
           /test_dir_truncate___truncate_empty_dir2_____10/empty_dir2|D|65284
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir1|D|97921
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir1/d2|D|97922
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir1/d2/d3|D|97923
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir2|D|97924
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir2/d2|D|32641
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir2_____10/nonempty_dir2/d2/d3|D|32642
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir1___-100
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir1___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir1___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir1 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_empty_dir1___-100
           /test_dir_truncate___truncate_empty_dir1___-100|D|32650
           /test_dir_truncate___truncate_empty_dir1___-100/empty_dir1|D|32651
           /test_dir_truncate___truncate_empty_dir1___-100/empty_dir2|D|32652
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir1/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir1/d2/f3.txt|F|24|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir2/f1.txt|F|31|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir2/f2.txt|F|32|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir2/d2|D|65285
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir1___-100/nonempty_dir2/d2/d3|D|65286
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir2_____-100
           /test_dir_truncate___truncate_nonempty_dir2_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2_____-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__d3___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/d3 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___-100/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1___-100
           /test_dir_truncate___truncate_nonempty_dir1___-100|D|32642
           /test_dir_truncate___truncate_nonempty_dir1___-100/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1___-100/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1___-100/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__sl_f1.txt___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/sl_f1.txt 10
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir1/f1.txt|F|18|10|9694c4ebd673a5e2fd26e4b2e64f92e914ebd95f
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___10/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_1_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_1_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_1_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_1/ 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_1_____10
           /test_dir_truncate___truncate_nonexist_1_____10|D|32641
           /test_dir_truncate___truncate_nonexist_1_____10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_1_____10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_1_____10/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/nonexist_6/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____-100/nonempty_dir2/d2/d3|D|65285
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__sl_f1.txt_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/sl_f1.txt/ 100
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir2/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____100/nonempty_dir2/d2/d3|D|32647
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_dir__nonexist_3_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_dir/nonexist_3/ 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0|D|32641
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____0/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2___-100
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___-100/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2___100
           /test_dir_truncate___truncate_nonempty_dir1__d2___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__d3_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/d3/ 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir1_____0
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir1_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir1_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir1/ 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir1_____0
           /test_dir_truncate___truncate_empty_dir1_____0|D|32645
           /test_dir_truncate___truncate_empty_dir1_____0/empty_dir1|D|32646
           /test_dir_truncate___truncate_empty_dir1_____0/empty_dir2|D|32647
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir1|D|32648
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir1/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir1/d2|D|32649
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir1/d2/f3.txt|F|24|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir1/d2/d3|D|32650
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir2|D|32651
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir2/f1.txt|F|31|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir2/f2.txt|F|32|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir2/d2|D|32652
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir1_____0/nonempty_dir2/d2/d3|D|65285
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2___100
           /test_dir_truncate___truncate_nonempty_dir2___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2___100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/ 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2_____1000
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir2/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____1000/nonempty_dir2/d2/d3|D|32647
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/ 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2_____1000
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/empty_dir2|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir1/d2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir1/d2/d3|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir2|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir2/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____1000/nonempty_dir2/d2/d3|D|65282
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_dir__nonexist_3_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_dir/nonexist_3/ 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100|D|32641
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/ 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2_____0
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f1.txt_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f1.txt/ 0
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/empty_dir1|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/empty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir1|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir1/d2|D|32649
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir1/d2/d3|D|32650
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir2|D|32651
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir2/d2|D|32652
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____0/nonempty_dir2/d2/d3|D|65285
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f2.txt_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f2.txt/ 1000
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____1000/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_d2/ 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/empty_dir1|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir2|D|32653
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir2/d2|D|32654
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____0/nonempty_dir2/d2/d3|D|32655
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f2.txt___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f2.txt 0
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir2/f2.txt|F|21|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir2/d2|D|97922
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___0/nonempty_dir2/d2/d3|D|97924
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__d3_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/d3/ 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/empty_dir1|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir2|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir2/d2|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____100/nonempty_dir2/d2/d3|D|32643
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_f1.txt 0
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/empty_dir1|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/empty_dir2|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir1|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir1/d2|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir1/d2/d3|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir2/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___0/nonempty_dir2/d2/d3|D|65282
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_f1.txt/ 1000
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____1000/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_1_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_1_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_1_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_1/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonexist_1_____-100
           /test_dir_truncate___truncate_nonexist_1_____-100|D|32641
           /test_dir_truncate___truncate_nonexist_1_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_1_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_1_____-100/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_1___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_1___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_1___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_1 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonexist_1___-100
           /test_dir_truncate___truncate_nonexist_1___-100|D|97923
           /test_dir_truncate___truncate_nonexist_1___-100/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonexist_1___-100/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_1___-100/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__d3___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/d3 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___10/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir2___-100
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir2___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir2___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir2 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_empty_dir2___-100
           /test_dir_truncate___truncate_empty_dir2___-100|D|32642
           /test_dir_truncate___truncate_empty_dir2___-100/empty_dir1|D|32643
           /test_dir_truncate___truncate_empty_dir2___-100/empty_dir2|D|32644
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir1|D|32645
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir1/d2|D|32646
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir1/d2/d3|D|32647
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir2|D|32648
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir2/d2|D|32649
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir2___-100/nonempty_dir2/d2/d3|D|32650
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_d2 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___10/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_1_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_1_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_1_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_1/ 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_1_____0
           /test_dir_truncate___truncate_nonexist_1_____0|D|97923
           /test_dir_truncate___truncate_nonexist_1_____0/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonexist_1_____0/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_1_____0/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_dir__nonexist_3___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_dir/nonexist_3 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10|D|32648
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/empty_dir1|D|32649
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/empty_dir2|D|32650
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir1|D|32651
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir1/d2|D|32652
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir2|D|65285
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir2/d2|D|65286
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___10/nonempty_dir2/d2/d3|D|65287
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/sl_f3.txt -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2___1000
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir1/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir1/d2/d3|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir2/d2|D|32649
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___1000/nonempty_dir2/d2/d3|D|32650
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir1___0
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir1___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir1___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir1 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir1___0
           /test_dir_truncate___truncate_empty_dir1___0|D|32641
           /test_dir_truncate___truncate_empty_dir1___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_empty_dir1___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir1___0/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__sl_f1.txt___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/sl_f1.txt 0
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__f3.txt_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/f3.txt/ 100
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/empty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/empty_dir2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir1|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir1/f1.txt|F|27|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir1/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir1/d2/f3.txt|F|22|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir1/d2/d3|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir2|D|65286
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir2/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir2/f2.txt|F|30|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir2/d2|D|65287
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____100/nonempty_dir2/d2/d3|D|65288
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/sl_f3.txt 100
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir1/d2/f3.txt|F|13|100|75e892f461f9d4c8e96d6963996b0b6b87a75782
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir2/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___100/nonempty_dir2/d2/d3|D|32647
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__d3_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/d3/ 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir2/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____10/nonempty_dir2/d2/d3|D|32647
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/nonexist_5/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir1|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir1/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir1/d2/d3|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir2/d2|D|32649
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____-100/nonempty_dir2/d2/d3|D|32650
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/sl_f3.txt/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f2.txt_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f2.txt/ 100
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____100/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/ 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1_____1000
           /test_dir_truncate___truncate_nonempty_dir1_____1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir1_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1_____1000/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir1_____100
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir1_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir1_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir1/ 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir1_____100
           /test_dir_truncate___truncate_empty_dir1_____100|D|32641
           /test_dir_truncate___truncate_empty_dir1_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_empty_dir1_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir1_____100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__d3___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/d3 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___-100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f2.txt___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f2.txt 10
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir2/f2.txt|F|21|10|cb091ce81530253707a6fa79e266f6285cf8c79b
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_d2 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_d2 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__d3___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/d3 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2_____-100
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100|D|32650
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/empty_dir1|D|32651
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/empty_dir2|D|32652
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir1/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir1/d2/f3.txt|F|24|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir2/f1.txt|F|31|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir2/f2.txt|F|32|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir2/d2|D|65285
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2_____-100/nonempty_dir2/d2/d3|D|65286
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir1___10
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir1___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir1___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir1 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir1___10
           /test_dir_truncate___truncate_empty_dir1___10|D|32641
           /test_dir_truncate___truncate_empty_dir1___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_empty_dir1___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir1___10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/nonexist_6 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/nonexist_6/ 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f1.txt___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f1.txt 100
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir2/f1.txt|F|20|100|ed4a77d1b56a118938788fc53037759b6c501e3d
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___100/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__sl_f1.txt___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/sl_f1.txt 1000
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir1/f1.txt|F|18|1000|c577f7a37657053275f3e3ecc06ec22e6b909366
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___1000/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt 0
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___0/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__f3.txt___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/f3.txt 100
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir1/d2/f3.txt|F|13|100|75e892f461f9d4c8e96d6963996b0b6b87a75782
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___100/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__d3_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/d3/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____-100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir2___1000
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir2___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir2___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir2 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir2___1000
           /test_dir_truncate___truncate_empty_dir2___1000|D|32641
           /test_dir_truncate___truncate_empty_dir2___1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_empty_dir2___1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir2___1000/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/nonexist_6 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir1|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir1/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir1/d2/d3|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir2/d2|D|32649
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___10/nonempty_dir2/d2/d3|D|32650
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/nonexist_6/ 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____10/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f2.txt___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f2.txt 100
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir2/f2.txt|F|21|100|73e4ea4018155d76ebe7374f30c9d1db00b81a4d
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f1.txt_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f1.txt/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__sl_f1.txt_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/sl_f1.txt/ 10
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/empty_dir1|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir2|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir2/d2|D|65286
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____10/nonempty_dir2/d2/d3|D|65287
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/nonexist_6 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___1000/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_2_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_2_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_2_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_2/ 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_2_____100
           /test_dir_truncate___truncate_nonexist_2_____100|D|32642
           /test_dir_truncate___truncate_nonexist_2_____100/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonexist_2_____100/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_2_____100/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f2.txt_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f2.txt/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt_____-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/nonexist_6 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6___0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2___0
           /test_dir_truncate___truncate_nonempty_dir2___0|D|32641
           /test_dir_truncate___truncate_nonempty_dir2___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2___0/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__f3.txt_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/f3.txt/ 10
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/empty_dir1|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir2|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir2/d2|D|65286
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____10/nonempty_dir2/d2/d3|D|65287
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/ 0
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/empty_dir1|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir2|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir2/d2|D|65286
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____0/nonempty_dir2/d2/d3|D|65287
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__d3___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/d3 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/empty_dir1|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/empty_dir2|D|97922
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir1|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir1/d2|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir1/d2/f3.txt|F|20|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir1/d2/d3|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir2|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir2/d2|D|65286
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___1000/nonempty_dir2/d2/d3|D|65287
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2___10
           /test_dir_truncate___truncate_nonempty_dir2___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir2___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2___10/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_dir__nonexist_3_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_dir/nonexist_3/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100|D|32650
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/empty_dir1|D|32651
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/empty_dir2|D|32652
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir1/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir1/d2/f3.txt|F|24|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir2/f1.txt|F|31|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir2/f2.txt|F|32|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir2/d2|D|65285
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____-100/nonempty_dir2/d2/d3|D|65286
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__nonexist_4___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/nonexist_4 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_2___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_2___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_2___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_2 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_2___100
           /test_dir_truncate___truncate_nonexist_2___100|D|32641
           /test_dir_truncate___truncate_nonexist_2___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_2___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_2___100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir2___0
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir2___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir2___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir2 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir2___0
           /test_dir_truncate___truncate_empty_dir2___0|D|32641
           /test_dir_truncate___truncate_empty_dir2___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_empty_dir2___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir1/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir2/f1.txt|F|21|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir2/f2.txt|F|22|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir2___0/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir2___100
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir2___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir2___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir2 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir2___100
           /test_dir_truncate___truncate_empty_dir2___100|D|97923
           /test_dir_truncate___truncate_empty_dir2___100/empty_dir1|D|97924
           /test_dir_truncate___truncate_empty_dir2___100/empty_dir2|D|97925
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir2___100/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir2_____0
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir2_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir2_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir2/ 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir2_____0
           /test_dir_truncate___truncate_empty_dir2_____0|D|32642
           /test_dir_truncate___truncate_empty_dir2_____0/empty_dir1|D|32643
           /test_dir_truncate___truncate_empty_dir2_____0/empty_dir2|D|32644
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir1|D|32645
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir1/d2|D|32646
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir1/d2/d3|D|32647
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir2|D|32648
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir2/d2|D|32649
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir2_____0/nonempty_dir2/d2/d3|D|32650
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir2___-100
           /test_dir_truncate___truncate_nonempty_dir2___-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2___-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2___-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2___-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/sl_f3.txt/ 100
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100|D|32651
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/empty_dir1|D|32652
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir2|D|65285
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir2/d2|D|65286
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____100/nonempty_dir2/d2/d3|D|65287
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__d3_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/d3/ 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/nonexist_6/ 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/ 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__nonexist_4_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/nonexist_4/ 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____10/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/ 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1_____0
           /test_dir_truncate___truncate_nonempty_dir1_____0|D|32641
           /test_dir_truncate___truncate_nonempty_dir1_____0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1_____0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1_____0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__sl_f1.txt___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/sl_f1.txt 100
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir1/f1.txt|F|18|100|ed4a77d1b56a118938788fc53037759b6c501e3d
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__d3___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/d3 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___1000/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir2_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir2_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir2_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir2/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_empty_dir2_____-100
           /test_dir_truncate___truncate_empty_dir2_____-100|D|32641
           /test_dir_truncate___truncate_empty_dir2_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_empty_dir2_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir2_____-100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___-100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__d3_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/d3/ 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____1000/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__d3___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/d3 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100|D|32654
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/empty_dir1|D|32655
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/empty_dir2|D|32656
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir1/d2|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir1/d2/d3|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir2/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3___100/nonempty_dir2/d2/d3|D|32646
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____-100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__sl_f1.txt___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/sl_f1.txt -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/empty_dir1|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/empty_dir2|D|32649
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir1|D|32650
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir1/f1.txt|F|38|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir1/d2|D|32658
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir1/d2/f3.txt|F|33|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir1/d2/d3|D|32659
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir2|D|32660
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir2/f1.txt|F|40|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir2/f2.txt|F|41|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir2/d2|D|65288
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt___-100/nonempty_dir2/d2/d3|D|65289
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/nonexist_6/ 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir1|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir1/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir1/d2/d3|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir2/d2|D|32649
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6_____1000/nonempty_dir2/d2/d3|D|32650
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_2___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_2___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_2___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_2 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonexist_2___-100
           /test_dir_truncate___truncate_nonexist_2___-100|D|32642
           /test_dir_truncate___truncate_nonexist_2___-100/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonexist_2___-100/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_2___-100/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/ 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/empty_dir1|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir2|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir2/d2|D|65286
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____1000/nonempty_dir2/d2/d3|D|65287
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_dir__nonexist_3___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_dir/nonexist_3 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000|D|32651
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/empty_dir1|D|32652
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir2|D|65285
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir2/d2|D|65286
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___1000/nonempty_dir2/d2/d3|D|65287
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/ 100
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt_____100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_f1.txt -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/ 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____100/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2___1000
           /test_dir_truncate___truncate_nonempty_dir2___1000|D|32651
           /test_dir_truncate___truncate_nonempty_dir2___1000/empty_dir1|D|32652
           /test_dir_truncate___truncate_nonempty_dir2___1000/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir2|D|65285
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir2/d2|D|65286
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2___1000/nonempty_dir2/d2/d3|D|65287
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_1___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_1___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_1___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_1 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_1___10
           /test_dir_truncate___truncate_nonexist_1___10|D|32641
           /test_dir_truncate___truncate_nonexist_1___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_1___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir2|D|32645
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir2/d2|D|32646
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_1___10/nonempty_dir2/d2/d3|D|32647
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/nonexist_6 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_f1.txt/ 10
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10|D|65289
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/empty_dir1|D|65290
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/empty_dir2|D|65291
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir1|D|65292
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir1/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir1/d2/d3|D|97922
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir2|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir2/d2|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____10/nonempty_dir2/d2/d3|D|97925
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000|D|65288
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/empty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/empty_dir2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir1|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir1/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir1/d2/d3|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir2|D|65286
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir2/d2|D|65289
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___1000/nonempty_dir2/d2/d3|D|65290
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_d2 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f1.txt___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f1.txt 10
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir1|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir1/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir1/d2/d3|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir2/f1.txt|F|20|10|9694c4ebd673a5e2fd26e4b2e64f92e914ebd95f
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir2/d2|D|32649
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___10/nonempty_dir2/d2/d3|D|32650
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/sl_f3.txt/ 0
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt 1000
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir1/f1.txt|F|18|1000|c577f7a37657053275f3e3ecc06ec22e6b909366
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___1000/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/sl_f3.txt 1000
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir1|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir1/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir1/d2/f3.txt|F|13|1000|f7421938baaac6a3fd7e5e340397873bba5c4382
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir1/d2/d3|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir2/d2|D|32649
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___1000/nonempty_dir2/d2/d3|D|32650
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__sl_f1.txt_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/sl_f1.txt/ 0
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/empty_dir1|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir2|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir2/d2|D|65286
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____0/nonempty_dir2/d2/d3|D|65287
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2___10
           /test_dir_truncate___truncate_nonempty_dir1__d2___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir2/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2___10/nonempty_dir2/d2/d3|D|32647
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1_____-100
           /test_dir_truncate___truncate_nonempty_dir1_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1_____-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__f3.txt_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/f3.txt/ 1000
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt_____1000/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/ 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1_____10
           /test_dir_truncate___truncate_nonempty_dir1_____10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1_____10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1_____10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1_____10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__sl_f1.txt_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/sl_f1.txt/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100|D|32650
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/empty_dir1|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/empty_dir2|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir1/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir1/d2/f3.txt|F|24|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir2/f1.txt|F|31|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir2/f2.txt|F|32|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir2/d2|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____-100/nonempty_dir2/d2/d3|D|65286
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir2_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir2_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir2_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir2/ 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir2_____1000
           /test_dir_truncate___truncate_empty_dir2_____1000|D|32641
           /test_dir_truncate___truncate_empty_dir2_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_empty_dir2_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir2_____1000/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/ 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_d2/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__nonexist_4___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/nonexist_4 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___0/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__d3___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/d3 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_d2/ 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2_____100/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/empty_dir1|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/empty_dir2|D|65286
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir1|D|65287
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir1/f1.txt|F|27|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir1/d2|D|65288
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir1/d2/f3.txt|F|22|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir1/d2/d3|D|65289
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir2|D|65290
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir2/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir2/f2.txt|F|30|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir2/d2|D|65291
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___-100/nonempty_dir2/d2/d3|D|65292
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_f1.txt/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt_____-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_2_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_2_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_2_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_2/ 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_2_____0
           /test_dir_truncate___truncate_nonexist_2_____0|D|65281
           /test_dir_truncate___truncate_nonexist_2_____0/empty_dir1|D|65282
           /test_dir_truncate___truncate_nonexist_2_____0/empty_dir2|D|65284
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir1|D|97921
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir1/d2|D|97922
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir1/d2/d3|D|97923
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir2|D|97924
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir2/d2|D|32641
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_2_____0/nonempty_dir2/d2/d3|D|32642
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f1.txt___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f1.txt 0
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_2___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_2___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_2___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_2 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_2___0
           /test_dir_truncate___truncate_nonexist_2___0|D|97923
           /test_dir_truncate___truncate_nonexist_2___0/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonexist_2___0/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_2___0/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir2_____100
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir2_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir2_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir2/ 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir2_____100
           /test_dir_truncate___truncate_empty_dir2_____100|D|32641
           /test_dir_truncate___truncate_empty_dir2_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_empty_dir2_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir2_____100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_1_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_1_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_1_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_1/ 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_1_____100
           /test_dir_truncate___truncate_nonexist_1_____100|D|32641
           /test_dir_truncate___truncate_nonexist_1_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_1_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_1_____100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir1___1000
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir1___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir1___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir1 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir1___1000
           /test_dir_truncate___truncate_empty_dir1___1000|D|32651
           /test_dir_truncate___truncate_empty_dir1___1000/empty_dir1|D|32652
           /test_dir_truncate___truncate_empty_dir1___1000/empty_dir2|D|32646
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir1|D|32645
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir1/d2|D|32644
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir1/d2/d3|D|32641
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir2|D|32642
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir2/d2|D|32643
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir1___1000/nonempty_dir2/d2/d3|D|32647
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__d3_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/d3/ 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir1/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir1/d2/f3.txt|F|14|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir2/f1.txt|F|21|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir2/f2.txt|F|22|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__d3_____10/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__nonexist_4___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/nonexist_4 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100|D|65289
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/empty_dir1|D|65290
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/empty_dir2|D|65291
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir1|D|65292
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir1/f1.txt|F|38|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir1/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir1/d2/f3.txt|F|33|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir1/d2/d3|D|97922
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir2|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir2/f1.txt|F|40|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir2/f2.txt|F|41|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir2/d2|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___-100/nonempty_dir2/d2/d3|D|97925
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/nonexist_5/ 1000
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____1000/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___1000/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_dir__nonexist_3___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_dir/nonexist_3 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0|D|32641
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___0/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir1_____10
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir1_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir1_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir1/ 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir1_____10
           /test_dir_truncate___truncate_empty_dir1_____10|D|32641
           /test_dir_truncate___truncate_empty_dir1_____10/empty_dir1|D|32642
           /test_dir_truncate___truncate_empty_dir1_____10/empty_dir2|D|32643
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir2|D|32645
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir2/d2|D|32646
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir1_____10/nonempty_dir2/d2/d3|D|32647
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/nonexist_5/ 100
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/empty_dir1|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/empty_dir2|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir1|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir1/d2|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir1/d2/d3|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir2/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____100/nonempty_dir2/d2/d3|D|65282
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_2_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_2_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_2_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_2/ 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_2_____1000
           /test_dir_truncate___truncate_nonexist_2_____1000|D|32641
           /test_dir_truncate___truncate_nonexist_2_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_2_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_2_____1000/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_f1.txt 100
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir1/f1.txt|F|18|100|ed4a77d1b56a118938788fc53037759b6c501e3d
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target___10/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f1.txt_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f1.txt/ 1000
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____1000/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1___100
           /test_dir_truncate___truncate_nonempty_dir1___100|D|32651
           /test_dir_truncate___truncate_nonempty_dir1___100/empty_dir1|D|32652
           /test_dir_truncate___truncate_nonempty_dir1___100/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir2|D|65285
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir2/d2|D|65286
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1___100/nonempty_dir2/d2/d3|D|65287
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/nonexist_6/ 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/empty_dir1|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/empty_dir2|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir1|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir1/f1.txt|F|27|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir1/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir1/d2/f3.txt|F|22|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir1/d2/d3|D|32649
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir2|D|32650
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir2/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir2/f2.txt|F|30|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir2/d2|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target___0/nonempty_dir2/d2/d3|D|32652
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f1.txt___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f1.txt 1000
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir2/f1.txt|F|20|1000|c577f7a37657053275f3e3ecc06ec22e6b909366
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt___1000/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__f3.txt___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/f3.txt 1000
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/empty_dir1|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/empty_dir2|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir1|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir1/d2|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir1/d2/f3.txt|F|12|1000|f7421938baaac6a3fd7e5e340397873bba5c4382
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir1/d2/d3|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir2/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___1000/nonempty_dir2/d2/d3|D|65282
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/nonexist_6/ 0
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target__nonexist_6_____0/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/ 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__sl_f1.txt_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/sl_f1.txt/ 1000
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/empty_dir2|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir1/d2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir1/d2/d3|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir2/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__sl_f1.txt_____1000/nonempty_dir2/d2/d3|D|65283
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f2.txt___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f2.txt 1000
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir2/f2.txt|F|21|1000|399f5ffef7a3ffbb2de9b4a80f09cb13f6d2a697
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f2.txt___1000/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt 10
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir1/f1.txt|F|18|10|9694c4ebd673a5e2fd26e4b2e64f92e914ebd95f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___10/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_d2 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_d2___1000/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_dir__nonexist_3___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_dir/nonexist_3 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100|D|32641
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/sl_f3.txt 0
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir1/d2/f3.txt|F|13|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt___0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/nonexist_5 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/nonexist_5/ 0
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5_____0/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt/nonexist_5 10
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt__nonexist_5___10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2_____-100
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2_____-100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2___100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2___100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2___100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2___100
           /test_dir_truncate___truncate_nonempty_dir2__d2___100|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___100/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_f1.txt 10
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir1/f1.txt|F|18|10|9694c4ebd673a5e2fd26e4b2e64f92e914ebd95f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___10/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__f1.txt___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/f1.txt -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__f1.txt___-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_no_such_target/ 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/empty_dir1|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/empty_dir2|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir1|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir1/d2|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir1/d2/d3|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir2/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_no_such_target_____1000/nonempty_dir2/d2/d3|D|65282
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/ 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2_____100
           /test_dir_truncate___truncate_nonempty_dir2_____100|D|32642
           /test_dir_truncate___truncate_nonempty_dir2_____100/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir2_____100/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir2/d2|D|97921
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2_____100/nonempty_dir2/d2/d3|D|97922
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__f1.txt_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/f1.txt/ 10
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10|D|97923
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir1/f1.txt|F|27|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir1/d2/f3.txt|F|22|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir2/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir2/f2.txt|F|30|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__f1.txt_____10/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1___1000
           /test_dir_truncate___truncate_nonempty_dir1___1000|D|97923
           /test_dir_truncate___truncate_nonempty_dir1___1000/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1___1000/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1___1000/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__nonexist_4___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/nonexist_4 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4___10/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__f3.txt___10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/f3.txt 10
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/empty_dir1|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/empty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir1|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir1/d2|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir1/d2/f3.txt|F|12|10|cb091ce81530253707a6fa79e266f6285cf8c79b
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir1/d2/d3|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir2/d2|D|32649
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___10/nonempty_dir2/d2/d3|D|32650
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/nonexist_6 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100|D|97921
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/empty_dir1|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/empty_dir2|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir1|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir1/d2|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir1/d2/d3|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir2|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir2/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target__nonexist_6___-100/nonempty_dir2/d2/d3|D|65282
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__f3.txt___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/f3.txt 0
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/empty_dir1|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/empty_dir2|D|97926
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir1|D|97927
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir1/f1.txt|F|27|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir1/d2|D|97928
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir1/d2/f3.txt|F|22|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir1/d2/d3|D|97929
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir2/f1.txt|F|29|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir2/f2.txt|F|30|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir2/d2|D|97931
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__f3.txt___0/nonempty_dir2/d2/d3|D|97932
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/sl_f3.txt/ 10
        Tau
        ENOTDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10|D|97921
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/empty_dir1|D|97923
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__sl_f3.txt_____10/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__nonexist_4_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/nonexist_4/ 100
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100|D|97923
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/empty_dir1|D|97924
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/empty_dir2|D|97925
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir1|D|97926
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir1/f1.txt|F|28|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir1/d2|D|97927
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir1/d2/f3.txt|F|23|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir1/d2/d3|D|97928
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir2|D|97929
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir2/f1.txt|F|30|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir2/f2.txt|F|31|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir2/d2|D|97930
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____100/nonempty_dir2/d2/d3|D|97931
        end dump-result






        ######################################
        ## Test truncate___truncate_empty_dir2___10
        ######################################
        mkdir /test_dir_truncate___truncate_empty_dir2___10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_empty_dir2___10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate empty_dir2 10
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_empty_dir2___10
           /test_dir_truncate___truncate_empty_dir2___10|D|32641
           /test_dir_truncate___truncate_empty_dir2___10/empty_dir1|D|32642
           /test_dir_truncate___truncate_empty_dir2___10/empty_dir2|D|32643
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_empty_dir2___10/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_dir__nonexist_3_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_dir/nonexist_3/ 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000|D|32641
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3_____1000/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__d3_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/d3/ 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3_____1000/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__nonexist_4_____-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/nonexist_4/ -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__nonexist_4_____-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2__d3___0
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2/d3 0
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2__d3___0/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_1_____1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_1_____1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_1_____1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_1/ 1000
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonexist_1_____1000
           /test_dir_truncate___truncate_nonexist_1_____1000|D|32641
           /test_dir_truncate___truncate_nonexist_1_____1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_1_____1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_1_____1000/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonexist_dir__nonexist_3___-100
        ######################################
        mkdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonexist_dir/nonexist_3 -100
        Tau
        EINVAL


        dump-result /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100|D|32641
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir1/d2|D|65281
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir1/d2/d3|D|65282
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir2|D|65283
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir2/d2|D|65284
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonexist_dir__nonexist_3___-100/nonempty_dir2/d2/d3|D|97921
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_no_such_target/ 10
        Tau
        ENOENT


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10|D|32641
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_no_such_target_____10/nonempty_dir2/d2/d3|D|32649
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/d2/sl_dotdot_f1.txt 1000
        Tau
        RV_none


        dump-result /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000|D|32650
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/empty_dir1|D|32651
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/empty_dir2|D|32652
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir1|D|65281
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir1/f1.txt|F|29|1000|c577f7a37657053275f3e3ecc06ec22e6b909366
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir1/d2|D|65282
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir1/d2/f3.txt|F|24|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir1/d2/d3|D|65283
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir2|D|65284
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir2/f1.txt|F|31|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir2/f2.txt|F|32|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir2/d2|D|65285
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1__d2__sl_dotdot_f1.txt___1000/nonempty_dir2/d2/d3|D|65286
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir1_____100
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir1_____100 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir1_____100
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir1/ 100
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir1_____100
           /test_dir_truncate___truncate_nonempty_dir1_____100|D|32643
           /test_dir_truncate___truncate_nonempty_dir1_____100/empty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir1_____100/empty_dir2|D|65281
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir1|D|65282
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir1/f1.txt|F|17|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir1/d2|D|65283
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir1/d2/f3.txt|F|12|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir1/d2/d3|D|65284
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir2|D|97921
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir2/f1.txt|F|19|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir2/f2.txt|F|20|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir2/d2|D|97922
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir1_____100/nonempty_dir2/d2/d3|D|97923
        end dump-result






        ######################################
        ## Test truncate___truncate_nonempty_dir2__d2___1000
        ######################################
        mkdir /test_dir_truncate___truncate_nonempty_dir2__d2___1000 0o777
        Tau
        RV_none

        chdir /test_dir_truncate___truncate_nonempty_dir2__d2___1000
        Tau
        RV_none

        mkdir empty_dir1 0o777
        Tau
        RV_none

        mkdir empty_dir2 0o777
        Tau
        RV_none

        mkdir nonempty_dir1 0o777
        Tau
        RV_none

        mkdir nonempty_dir1/d2 0o777
        Tau
        RV_none

        open nonempty_dir1/d2/f3.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inc" 83
        Tau
        RV_num(83)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir1/d2/d3 0o777
        Tau
        RV_none

        symlink ../f1.txt nonempty_dir1/d2/sl_dotdot_f1.txt
        Tau
        RV_none

        symlink no_such_target nonempty_dir1/d2/sl_no_such_target
        Tau
        RV_none

        symlink ../no_such_target nonempty_dir1/d2/sl_dotdot_no_such_target
        Tau
        RV_none

        symlink ../d2 nonempty_dir1/d2/sl_dotdot_d2
        Tau
        RV_none

        open_close nonempty_dir1/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        symlink f1.txt nonempty_dir1/sl_f1.txt
        Tau
        RV_none

        mkdir nonempty_dir2 0o777
        Tau
        RV_none

        open_close nonempty_dir2/f1.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_none

        open nonempty_dir2/f2.txt [O_CREAT;O_WRONLY] 0o666
        Tau
        RV_num(3)

        write! (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exer" 167
        Tau
        RV_num(167)

        close (FD 3)
        Tau
        RV_none

        mkdir nonempty_dir2/d2 0o777
        Tau
        RV_none

        mkdir nonempty_dir2/d2/d3 0o777
        Tau
        RV_none

        symlink ../../nonempty_dir1/d2/f3.txt nonempty_dir2/d2/sl_f3.txt
        Tau
        RV_none


        truncate nonempty_dir2/d2 1000
        Tau
        EISDIR


        dump-result /test_dir_truncate___truncate_nonempty_dir2__d2___1000
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000|D|32641
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/empty_dir1|D|32642
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/empty_dir2|D|32643
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir1|D|32644
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir1/f1.txt|F|18|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir1/sl_f1.txt|L|f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir1/d2|D|32645
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir1/d2/f3.txt|F|13|83|4b535f836f6006423fc132a59e78dfcc4fe6292f
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir1/d2/sl_dotdot_d2|L|../d2
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir1/d2/sl_dotdot_f1.txt|L|../f1.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir1/d2/sl_dotdot_no_such_target|L|../no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir1/d2/sl_no_such_target|L|no_such_target
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir1/d2/d3|D|32646
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir2|D|32647
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir2/f1.txt|F|20|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir2/f2.txt|F|21|167|d09f4e47c22373e56c2369633ac3dcb71d598601
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir2/d2|D|32648
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir2/d2/sl_f3.txt|L|../../nonempty_dir1/d2/f3.txt
           /test_dir_truncate___truncate_nonempty_dir2__d2___1000/nonempty_dir2/d2/d3|D|32649
        end dump-result






