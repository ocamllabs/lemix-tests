        # Tests for a file underlying a file-descriptor
        # being modified while the descriptor is open

        # create a file with some content
     5: open f1.txt [O_RDWR;O_CREAT] 0o644
        RV_num(3)
     6: write! (FD 3) "0123456789" 10
        RV_num(10)

     8: open f1.txt [O_RDONLY]
        RV_num(4)
        # check we are at the beginning
    10: read! (FD 4) 100
        RV_bytes("0123456789")

        # check lseek to FD 4 does not affect FD 3
    13: lseek (FD 4) 0 SEEK_SET
        RV_num(0)
    14: write! (FD 3) "AB" 2
        RV_num(2)

        # but content is present in both
    17: pread! (FD 3) 100 0
        RV_bytes("0123456789AB")
    18: pread! (FD 4) 100 0
        RV_bytes("0123456789AB")

    20: close (FD 3)
        RV_none
    21: close (FD 4)
        RV_none



        # open f1, then delete it
    26: open f1.txt [O_RDONLY]
        RV_num(3)
    27: unlink f1.txt
        RV_none
    28: pread (FD 3) 100 0

Warning:     28: pread (FD 3) 100 0
   more than one possible result value
   randomly continuing execution with RV_bytes("0123456")
        possible results: [RV_bytes("");RV_bytes("0");RV_bytes("01");RV_bytes("012");RV_bytes("0123");RV_bytes("01234");RV_bytes("012345");RV_bytes("0123456");RV_bytes("01234567");RV_bytes("012345678");RV_bytes("0123456789");RV_bytes("0123456789A");RV_bytes("0123456789AB")]
        RV_bytes("0123456")

    30: open_close f1.txt [O_RDONLY]
        ENOENT

    32: close (FD 3)
        RV_none


        # open f1, then rename it
    36: open f1.txt [O_RDWR;O_CREAT] 0o644
        RV_num(3)
    37: write! (FD 3) "0123456789" 10
        RV_num(10)
    38: close (FD 3)
        RV_none

    40: open f1.txt [O_RDONLY]
        RV_num(3)
    41: rename f1.txt f2.txt
        RV_none
    42: pread! (FD 3) 100 0
        RV_bytes("0123456789")

    44: open_close f1.txt [O_RDONLY]
        ENOENT
    45: open f2.txt [O_RDONLY]
        RV_num(4)
    46: pread! (FD 4) 100 0
        RV_bytes("0123456789")
    47: close (FD 4)
        RV_none
    48: close (FD 3)
        RV_none

