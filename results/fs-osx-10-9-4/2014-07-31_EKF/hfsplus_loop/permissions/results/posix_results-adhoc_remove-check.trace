        ###########################################
        # Testing removing files and directories
        ###########################################

        # create dirs with various permissions and
        # a file and dir inside it
        mkdir /tmp_dir_rwx/ 0o777
        Tau
        RV_none

        open_close /tmp_dir_rwx/file.txt [O_CREAT;O_RDWR] 0o666
        Tau
        RV_none

        mkdir /tmp_dir_rwx/subdir 0o777
        Tau
        RV_none

        chmod /tmp_dir_rwx/ 0o700
        Tau
        RV_none


        mkdir /tmp_dir_rwt/ 0o777
        Tau
        RV_none

        open_close /tmp_dir_rwt/file.txt [O_CREAT;O_RDWR] 0o666
        Tau
        RV_none

        mkdir /tmp_dir_rwt/subdir 0o777
        Tau
        RV_none

        chmod /tmp_dir_rwt/ 0o1700
        Tau
        RV_none


        mkdir /tmp_dir_rw/ 0o777
        Tau
        RV_none

        open_close /tmp_dir_rw/file.txt [O_CREAT;O_RDWR] 0o666
        Tau
        RV_none

        mkdir /tmp_dir_rw/subdir 0o777
        Tau
        RV_none

        chmod /tmp_dir_rw/ 0o600
        Tau
        RV_none


        mkdir /tmp_dir_rx/ 0o777
        Tau
        RV_none

        open_close /tmp_dir_rx/file.txt [O_CREAT;O_RDWR] 0o666
        Tau
        RV_none

        mkdir /tmp_dir_rx/subdir 0o777
        Tau
        RV_none

        chmod /tmp_dir_rx/ 0o500
        Tau
        RV_none


        mkdir /tmp_dir_r/ 0o777
        Tau
        RV_none

        open_close /tmp_dir_r/file.txt [O_CREAT;O_RDWR] 0o666
        Tau
        RV_none

        mkdir /tmp_dir_r/subdir 0o777
        Tau
        RV_none

        chmod /tmp_dir_r/ 0o400
        Tau
        RV_none


        mkdir /tmp_dir_wx/ 0o777
        Tau
        RV_none

        open_close /tmp_dir_wx/file.txt [O_CREAT;O_RDWR] 0o666
        Tau
        RV_none

        mkdir /tmp_dir_wx/subdir 0o777
        Tau
        RV_none

        chmod /tmp_dir_wx/ 0o300
        Tau
        RV_none


        mkdir /tmp_dir_w/ 0o777
        Tau
        RV_none

        open_close /tmp_dir_w/file.txt [O_CREAT;O_RDWR] 0o666
        Tau
        RV_none

        mkdir /tmp_dir_w/subdir 0o777
        Tau
        RV_none

        chmod /tmp_dir_w/ 0o200
        Tau
        RV_none


        mkdir /tmp_dir_wt/ 0o777
        Tau
        RV_none

        open_close /tmp_dir_wt/file.txt [O_CREAT;O_RDWR] 0o666
        Tau
        RV_none

        mkdir /tmp_dir_wt/subdir 0o777
        Tau
        RV_none

        chmod /tmp_dir_wt/ 0o1300
        Tau
        RV_none


        mkdir /tmp_dir_rwx/ 0o777
        Tau
        EEXIST

        open_close /tmp_dir_rwx/file.txt [O_CREAT;O_RDWR] 0o666
        Tau
        RV_none

        mkdir /tmp_dir_rwx/subdir 0o777
        Tau
        EEXIST

        chmod /tmp_dir_x/ 0o100
        Tau
        ENOENT


        mkdir /tmp_dir_/ 0o777
        Tau
        RV_none

        open_close /tmp_dir_/file.txt [O_CREAT;O_RDWR] 0o666
        Tau
        RV_none

        mkdir /tmp_dir_/subdir 0o666
        Tau
        RV_none

        chmod /tmp_dir_/ 0o000
        Tau
        RV_none



        # trying to delete the file
        unlink /tmp_dir_rwx/file.txt
        Tau
        RV_none

        unlink /tmp_dir_rwt/file.txt
        Tau
        RV_none

        unlink /tmp_dir_rw/file.txt
        Tau
        RV_none

        unlink /tmp_dir_rx/file.txt
        Tau
        RV_none

        unlink /tmp_dir_r/file.txt
        Tau
        RV_none

        unlink /tmp_dir_wx/file.txt
        Tau
        RV_none

        unlink /tmp_dir_wt/file.txt
        Tau
        RV_none

        unlink /tmp_dir_w/file.txt
        Tau
        RV_none

        unlink /tmp_dir_x/file.txt
        Tau
        ENOENT

        unlink /tmp_dir_/file.txt
        Tau
        RV_none


        # trying to delete the dir
        rmdir /tmp_dir_rwx/subdir
        Tau
        RV_none

        rmdir /tmp_dir_rwt/subdir
        Tau
        RV_none

        rmdir /tmp_dir_rw/subdir
        Tau
        RV_none

        rmdir /tmp_dir_rx/subdir
        Tau
        RV_none

        rmdir /tmp_dir_r/subdir
        Tau
        RV_none

        rmdir /tmp_dir_wx/subdir
        Tau
        RV_none

        rmdir /tmp_dir_wt/subdir
        Tau
        RV_none

        rmdir /tmp_dir_w/subdir
        Tau
        RV_none

        rmdir /tmp_dir_x/subdir
        Tau
        ENOENT

        rmdir /tmp_dir_/subdir
        Tau
        RV_none


        dump-result
           /|D|4501
           /tmp_dir_r|D|4619
           /tmp_dir_rwt|D|4580
           /tmp_dir_rx|D|4608
           /tmp_dir_wt|D|4660
        end dump-result
