        ###########################################
        # Testing umask
        ###########################################

        # for testing umask 
        # files and dirs are created with different
        # permission given as arguments.

        # in directory d_xxx 
        # a f_yyy.txt or 
        # a directory dir_yyy
        # are created with umask 0oxxx and
        # permission argument 0oyyy
        # after creating stat is used to get
        # the actual permission of the newly
        # created file or directory


        ###########################################
        # Initialisation
        ###########################################

        umask 0o000
        Tau
        RV_file_perm(0o022)

        mkdir /d_022 0o777
        Tau
        RV_none

        mkdir /d_000 0o777
        Tau
        RV_none

        mkdir /d_444 0o777
        Tau
        RV_none



        ###########################################
        # umask 0o022
        ###########################################

        umask 0o022
        Tau
        RV_file_perm(0o000)

        chdir /d_022
        Tau
        RV_none


        open f_777.txt [O_CREAT;O_RDWR] 0o777
        Tau
        RV_num(3)

        close (FD 3)
        Tau
        RV_none

        stat f_777.txt
        Tau
        { st_dev=16777220; st_ino=4543; st_kind=S_IFREG; st_perm=0o755; st_nlink=1; st_uid=-1; st_gid=-1; st_rdev=0; st_size=0; }


        open f_444.txt [O_CREAT;O_RDWR] 0o444
        Tau
        RV_num(3)

        close (FD 3)
        Tau
        RV_none

        stat f_444.txt
        Tau
        { st_dev=16777220; st_ino=4547; st_kind=S_IFREG; st_perm=0o444; st_nlink=1; st_uid=-1; st_gid=-1; st_rdev=0; st_size=0; }


        open f_322.txt [O_CREAT;O_RDWR] 0o322
        Tau
        RV_num(3)

        close (FD 3)
        Tau
        RV_none

        stat f_322.txt
        Tau
        { st_dev=16777220; st_ino=4550; st_kind=S_IFREG; st_perm=0o300; st_nlink=1; st_uid=-1; st_gid=-1; st_rdev=0; st_size=0; }


        mkdir dir_777 0o777
        Tau
        RV_none

        stat dir_777
        Tau
        { st_dev=16777220; st_ino=4553; st_kind=S_IFDIR; st_perm=0o755; st_nlink=2; st_uid=-1; st_gid=-1; st_rdev=0; st_size=68; }


        mkdir dir_444 0o444
        Tau
        RV_none

        stat dir_444
        Tau
        { st_dev=16777220; st_ino=4555; st_kind=S_IFDIR; st_perm=0o444; st_nlink=2; st_uid=-1; st_gid=-1; st_rdev=0; st_size=68; }


        mkdir dir_322 0o322
        Tau
        RV_none

        stat dir_322
        Tau
        { st_dev=16777220; st_ino=4557; st_kind=S_IFDIR; st_perm=0o300; st_nlink=2; st_uid=-1; st_gid=-1; st_rdev=0; st_size=68; }




        ###########################################
        # umask 0o000
        ###########################################

        umask 0o000
        Tau
        RV_file_perm(0o022)

        chdir /d_000
        Tau
        RV_none


        open f_777.txt [O_CREAT;O_RDWR] 0o777
        Tau
        RV_num(3)

        close (FD 3)
        Tau
        RV_none

        stat f_777.txt
        Tau
        { st_dev=16777220; st_ino=4560; st_kind=S_IFREG; st_perm=0o777; st_nlink=1; st_uid=-1; st_gid=-1; st_rdev=0; st_size=0; }


        open f_444.txt [O_CREAT;O_RDWR] 0o444
        Tau
        RV_num(3)

        close (FD 3)
        Tau
        RV_none

        stat f_444.txt
        Tau
        { st_dev=16777220; st_ino=4563; st_kind=S_IFREG; st_perm=0o444; st_nlink=1; st_uid=-1; st_gid=-1; st_rdev=0; st_size=0; }


        open f_322.txt [O_CREAT;O_RDWR] 0o322
        Tau
        RV_num(3)

        close (FD 3)
        Tau
        RV_none

        stat f_322.txt
        Tau
        { st_dev=16777220; st_ino=4565; st_kind=S_IFREG; st_perm=0o322; st_nlink=1; st_uid=-1; st_gid=-1; st_rdev=0; st_size=0; }


        mkdir dir_777 0o777
        Tau
        RV_none

        stat dir_777
        Tau
        { st_dev=16777220; st_ino=4573; st_kind=S_IFDIR; st_perm=0o777; st_nlink=2; st_uid=-1; st_gid=-1; st_rdev=0; st_size=68; }


        mkdir dir_444 0o444
        Tau
        RV_none

        stat dir_444
        Tau
        { st_dev=16777220; st_ino=4584; st_kind=S_IFDIR; st_perm=0o444; st_nlink=2; st_uid=-1; st_gid=-1; st_rdev=0; st_size=68; }


        mkdir dir_322 0o322
        Tau
        RV_none

        stat dir_322
        Tau
        { st_dev=16777220; st_ino=4585; st_kind=S_IFDIR; st_perm=0o322; st_nlink=2; st_uid=-1; st_gid=-1; st_rdev=0; st_size=68; }





        ###########################################
        # umask 0o444
        ###########################################

        umask 0o444
        Tau
        RV_file_perm(0o000)

        chdir /d_444
        Tau
        RV_none


        open f_777.txt [O_CREAT;O_RDWR] 0o777
        Tau
        RV_num(3)

        close (FD 3)
        Tau
        RV_none

        stat f_777.txt
        Tau
        { st_dev=16777220; st_ino=4586; st_kind=S_IFREG; st_perm=0o333; st_nlink=1; st_uid=-1; st_gid=-1; st_rdev=0; st_size=0; }


        open f_444.txt [O_CREAT;O_RDWR] 0o444
        Tau
        RV_num(3)

        close (FD 3)
        Tau
        RV_none

        stat f_444.txt
        Tau
        { st_dev=16777220; st_ino=4587; st_kind=S_IFREG; st_perm=0o000; st_nlink=1; st_uid=-1; st_gid=-1; st_rdev=0; st_size=0; }


        open f_322.txt [O_CREAT;O_RDWR] 0o322
        Tau
        RV_num(3)

        close (FD 3)
        Tau
        RV_none

        stat f_322.txt
        Tau
        { st_dev=16777220; st_ino=4588; st_kind=S_IFREG; st_perm=0o322; st_nlink=1; st_uid=-1; st_gid=-1; st_rdev=0; st_size=0; }


        mkdir dir_777 0o777
        Tau
        RV_none

        stat dir_777
        Tau
        { st_dev=16777220; st_ino=4597; st_kind=S_IFDIR; st_perm=0o333; st_nlink=2; st_uid=-1; st_gid=-1; st_rdev=0; st_size=68; }


        mkdir dir_444 0o444
        Tau
        RV_none

        stat dir_444
        Tau
        { st_dev=16777220; st_ino=4599; st_kind=S_IFDIR; st_perm=0o000; st_nlink=2; st_uid=-1; st_gid=-1; st_rdev=0; st_size=68; }


        mkdir dir_322 0o322
        Tau
        RV_none

        stat dir_322
        Tau
        { st_dev=16777220; st_ino=4600; st_kind=S_IFDIR; st_perm=0o322; st_nlink=2; st_uid=-1; st_gid=-1; st_rdev=0; st_size=68; }

